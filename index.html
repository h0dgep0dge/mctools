<!DOCTYPE html>
<html>
  <body>
    <input type="file" id="selector">
    <script src="pako/dist/pako.js"></script>
    <script src="node-nbt/dist/nbt.js"></script>
    <script src="buffer/dist/buffer.js"></script>
    <script>
      function arrayToString(arr) {
        var i, str = '';

        for (i = 0; i < arr.length; i++) {
          str += '%' + ('0' + arr[i].toString(16)).slice(-2);
        }
        return decodeURIComponent(str);
      }

      function nbt_find(list,name) {
        for(var i = 0;i < list.length;i++) {
          if(list[i].name == name) return list[i];
        }
      }

      var e = document.getElementById('selector');
      e.addEventListener('change',function(e) {
        for(var i = 0;i < e.target.files.length;i++) {
          var f = e.target.files.item(i);
          var reader = new FileReader();
          reader.addEventListener('load',function(result) {
            var r = new Uint8Array(result.target.result);
            var d = pako.ungzip(r);
            var r = nbt.NbtReader.readTag(Buffer.Buffer(d));

            var v = r.val[0].val;
            nbt_find(nbt_find(nbt_find(v,"Player").val,"Inventory").val.list[0].val,"Count").val = 64;

            var o = nbt.NbtWriter.writeTag(r);
            var c = pako.gzip(o);
            var b = new Blob([c],{type: 'application/gzip'});

            var a = document.createElement('a');
            var linkText = document.createTextNode("Download");
            a.appendChild(linkText);
            a.href = URL.createObjectURL(b);
            document.body.appendChild(a);
          });
          reader.readAsArrayBuffer(f);
        }
      });
    </script>
  </body>
</html>
